{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  const stats = [\n    { title: 'Likes', value: imgInfo.likes },\n    { title: 'Views', value: imgInfo.views },\n    { title: 'Comments', value: imgInfo.comments },\n    { title: 'Downloads', value: imgInfo.downloads },\n  ];\n\n  const statsMarkup = stats\n    .map(\n      stat => `\n        <div class=\"gallery-item\">\n          <p class=\"gallery-title\">${stat.title}</p>\n          <p class=\"gallery-count\">${stat.value}</p>\n        </div>`\n    )\n    .join('');\n\n  return `\n    <li class=\"gallery-card\">\n      <article class=\"card\">\n        <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n        </a>\n        <div class=\"gallery-container\">\n          ${statsMarkup}\n        </div>\n      </article>\n    </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      q: searchedQuery,\n      key: '48348047-29f6f569c2c15fdf8af3c5251',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionDelay: 300,\n  captionsData: 'alt',\n});\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      event.currentTarget.reset();\n      iziToast.error({\n        message: 'Please enter your request',\n        position: 'topRight',\n      });\n      return;\n    }\n      \n    page = 1;\n\n    loadBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n      \n    const response = await fetchPhotosByQuery(searchedQuery, page);\n    const data = response.data;\n\n      if (data.totalHits === 0) {\n        loader.classList.add('is-hidden');\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n\n    if (data.totalHits > page * 15) {\n      loadBtn.classList.remove('is-hidden');\n    }\n\n    galleryEl.innerHTML = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    loader.classList.add('is-hidden');\n    scrollDown();\n    lightbox.refresh();\n    searchFormEl.reset();\n  } catch (error) {\n      loader.classList.add('is-hidden');\n    // loader.style.display = 'none';\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error('Error fetching photos:', error);\n  }\n};\n\nconst onLoadMoreBtn = async () => {\n  try {\n    page++;\n    const response = await fetchPhotosByQuery(searchedQuery, page);\n    const data = response.data;\n\n    const postCardsTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', postCardsTemplate);\n    scrollDown();\n    lightbox.refresh();\n\n    if (page * 15 >= data.totalHits) {\n      loadBtn.classList.add('is-hidden');\n    }\n  } catch (error) {\n      loader.classList.add('is-hidden');\n      iziToast.error({\n      message: 'Error loading more images',\n      position: 'topRight',\n    });\n    console.error('Error loading more images:', error);\n  }\n};\n\nfunction scrollDown() {\n    const firstCard = document.querySelector('.gallery-card');\nif (!firstCard) return;\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    \n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadBtn.addEventListener('click', onLoadMoreBtn);\n\n     "],"names":["createGalleryCardTemplate","imgInfo","statsMarkup","stat","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadBtn","page","lightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","data","el","scrollDown","error","onLoadMoreBtn","postCardsTemplate","firstCard","cardHeight"],"mappings":"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"}